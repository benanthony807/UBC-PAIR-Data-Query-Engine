
======== OVERALL ========
{'BODY ', ' OPTIONS (', ' TRANSFORMATIONS)? '}
zValQuery1a: Overall - Simple                                               query: { "WHERE": {"GT": {"courses_avg": 97 }}, "OPTIONS": { "COLUMNS": [ "courses_title", "overallAvg" ], "ORDER": { "dir": "UP", "keys": [ "courses_dept"] } }, "TRANSFORMATIONS": { "GROUP": [ "courses_title", "courses_avg" ], "APPLY": [{"overallAvg":{"AVG":"courses_avg"}}]}}
zValQuery1b: Overall - Out of order                                         query: {"OPTIONS", "TRANSFORMATIONS", "WHERE"}

zInvQuery1a: Overall - TRANSFORMATIONS - misspelled                         query: {OPTIONS, WHERE, TRANSFORM}
zInvQuery1b: Overall - TRANSFORMATIONS - misspelled                         query: {OPTIONS, WHERE, transformations}
zInvQuery1c: Overall - OPTIONS - misspelled                                 query: {OPTI, WHERE, TRANSFORM}
zInvQuery1d: Overall - OPTIONS - misspelled                                 query: {options, WHERE, TRANSFORM}
zInvQuery1e: Overall - WHERE - misspelled                                   query: {OPTIONS, WHE, TRANSFORM}
zInvQuery1f: Overall - WHERE - misspelled                                   query: {OPTIONS, where, TRANSFORM}
zInvQuery1g: Overall - GROUP - replaces TRANSFORMATIONS                     query: {WHERE, OPTIONS, GROUP}

======== WHERE ========
zInvQuery10a: WHERE - semantics - MCOMPARATOR - courses_seats               query: {WHERE: GT: courses_seats: 97)
zInvQuery10b: WHERE - semantics - MCOMPARATOR - courses_furniture           query: {WHERE: GT: courses_furniture: 97)

======== OPTIONS ========
ZValQuery2: OPTIONS - syntax - out of order                                 OPTIONS: {ORDER, COLUMNS}
ZInvQuery2a: OPTIONS - syntax - empty                                       OPTIONS: []

======== COLUMNS ========
zValQuery3a: COLUMNS - semantics - key only in APPLY                        COLUMNS: ["overallAvg"] ... GROUP: "courses_avg" ... APPLY: "overallAvg"
zValQuery3b: COLUMNS - semantics - key only in GROUP                        COLUMNS: ["courses_avg"] ... GROUP: "courses_avg" ... APPLY: "overallAvg"
zValQuery3c: COLUMNS - semantics - all m and s keys                         COLUMNS: [avg, dept, fail, pass, etc]
zValQuery3c: COLUMNS - semantics - all m and s keys + APPLYKEY              COLUMNS: [avg, dept, fail, pass, etc]
zInvQuery3a: COLUMNS - semantics - key not in GROUP or APPLY                COLUMNS: ["courses_avg", "courses_dept"] ... GROUP: "courses_avg" ... APPLY: "overallAvg"
zInvQuery3b: COLUMNS - syntax - empty                                       COLUMNS: []
zInvQuery3e: COLUMNS - syntax - not a list                                  COLUMNS: {}
zInvQuery3c: COLUMNS - semantics - all m and s keys + APPLYKEY + extra      COLUMNS: [avg, dept, fail, pass, etc]
zInvQuery3d: COLUMNS - semantics - all m and s keys + APPLYKEY + rooms key  COLUMNS: [avg, dept, fail, pass, etc]
zInvQuery3f: COLUMNS - semantics - courses_avg and courses_seats            COLUMNS: ["courses_avg", "courses_seats"]
zInvQuery3g: COLUMNS - semantics - courses_seats                            COLUMNS: ["courses_seats"]
zInvQuery3h: COLUMNS - semantics - rooms_avg                                COLUMNS: ["rooms_avg"]
zInvQuery3i: COLUMNS - semantics - rooms_dept                               COLUMNS: ["rooms_dept"]

======== ORDER ========
ORDER: ' ('{ dir:'  DIRECTION ', keys: [ ' ANYKEY (',' ANYKEY)* ']}') | ANYKEY
zValQuery4a: ORDER - syntax - out of order                                  ORDER: {keys, dir}

zInvQuery4a: ORDER - syntax - dir misspelled (not present)                  ORDER: {d, keys}
zInvQuery4b: ORDER - syntax - keys misspelled (not present)                 ORDER: {dir, ke}
zInvQuery4i: ORDER - syntax - dir has >2 keys                               ORDER: {dir, keys, third_key}
zInvQuery4j: ORDER - syntax - empty                                         ORDER: {}

dir:'  DIRECTION ' || DIRECTION ::= 'UP' | 'DOWN'
zInvQuery4c: ORDER - syntax - dir - UP misspelled                           DIR: up
zInvQuery4d: ORDER - syntax - dir - UP misspelled                           DIR: U

zValQuery4b: ORDER - syntax - keys - duplicate elements in list             KEYS: ["courses_avg", "courses_avg"]
zInvQuery4e: ORDER - syntax - keys - not a list                             KEYS: {}
zInvQuery4f: ORDER - syntax - keys - empty list                             KEYS: []
zInvQuery4g: ORDER - semantics - keys - underscorless key not in APPLY      KEYS: ["hello"] ... APPLY: ["overallAvg"]
zInvQuery4h: ORDER - semantics - keys - underscore key not in COLUMNS       KEYS: ["courses_avg", "courses_dept"] ... COLUMNS: ["courses_avg"]

======== TRANSFORMATIONS ========
'TRANSFORMATIONS: {' GROUP ', ' APPLY '}'
zValQuery5a: TRANSFORMATIONS - syntax - out of order:                       TRANSFORMATIONS: {' APPLY ', ' GROUP '}
zInvQuery5a: TRANSFORMATIONS - syntax - not an object:                      TRANSFORMATIONS: []
zInvQuery5b: TRANSFORMATIONS - syntax - empty object:                       TRANSFORMATIONS: {}
zInvQuery5c: TRANSFORMATIONS - syntax - missing APPLY                       TRANSFORMATIONS: {' GROUP '}
zInvQuery5d: TRANSFORMATIONS - syntax - missing GROUP                       TRANSFORMATIONS: { 'APPLY'}
zInvQuery5f: TRANSFORMATIONS - syntax - missing GROUP2                      TRANSFORMATIONS: { 'group', 'APPLY'}
zInvQuery5e: TRANSFORMATIONS - syntax - 3 keys:                             TRANSFORMATIONS: {' GROUP ', 'APPLY', 'THIRD_KEY'}

==== GROUP ====
'GROUP: [' (key ',')* key ']'
zValQuery6a: GROUP - syntax - one valid key                                 GROUP: [validKey1]
zValQuery6b: GROUP - syntax - two different valid keys                      GROUP: [validKey1, validKey2]
zValQuery6e: GROUP - syntax - three different valid keys + 1 dup            GROUP: [validKey1, validKey2, validKey3, validKey1]
zValQuery6c: GROUP - semantics - two duplicate valid keys                   GROUP: [validKey1, validKey1]
zValQuery6d: GROUP - semantics - key not in columns                         GROUP: [validKey1]

zInvQuery6a: GROUP - syntax - not a list                                    GROUP: {}
zInvQuery6b: GROUP - syntax - empty list                                    GROUP: []
zInvQuery6c: GROUP - semantics - key - not a valid idstring                 GROUP: [cour_avg]
zInvQuery6c: GROUP - semantics - key - valid key and invalid key            GROUP: [courses_avg, cour_av]
zInvQuery6d: GROUP - semantics - key - not a valid field                    GROUP: [courses_av]
zInvQuery6e: GROUP - semantics - key - no '_'                               GROUP: [coursesavg]
zInvQuery6f: GROUP - semantics - key - all m/s keys + rooms key             GROUP: [coursesavg]
zInvQuery6g: GROUP - semantics - key - courses_seats                        GROUP: [courses_seats]

==== APPLY ====
'APPLY: [' (APPLYRULE (', ' APPLYRULE )* )? ']'
zValQuery1a: APPLY - syntax - one valid key                                 APPLY: [validKey1]
zValQuery7a: APPLY - syntax - two different valid keys                      APPLY: [validKey1, validKey2]
zValQuery7a: APPLY - semantics - key not in columns                         APPLY: [validKey1]
zValQuery7b: APPLY - syntax - empty list                                    APPLY: []

zInvQuery7a: APPLY - syntax - not a list                                    APPLY: {}
zInvQuery7c: APPLY - semantics - two duplicate valid keys (identical)       APPLY: [validKey1, validKey1]
zInvQuery7d: APPLY - semantics - two duplicate valid keys (dif tokens)      APPLY: [validKey1, validKey1]

APPLYRULE ::= '{' applykey ': {' APPLYTOKEN ':' key '}}'
zInvQuery8a: APPLYRULE - syntax - not an object                             APPLY: [[]]
zInvQuery8b: APPLYRULE - syntax - empty object                              APPLY: [{}]
zInvQuery8c: APPLYRULE - syntax - multiple keys in applyrule object         APPLY: [{overallAvg: {...}, overallDept: {...}}]
applykey ::= [^_]+ // one or more of any character except underscore.
zInvQuery8d: APPLYKEY - syntax - has _                                      APPLY: [{courses_avg: ...}]
zInvQuery8e: APPLYKEY - syntax - _ only                                     APPLY: [{_: ...}]

APPLYTOKEN ::= 'MAX' | 'MIN' | 'AVG' | 'COUNT' | 'SUM'
zValQuery9a: APPLYTOKEN - syntax - multiple keys in applytoken object       APPLY: [{overallAvg: {AVG:courses_avg, AVG:courses_avg}}]
zValQuery9b: APPLYTOKEN - syntax - multiple keys in applyrule and token     APPLY: [{overallAvg: {AVG:courses_avg, AVG:courses_avg}, overallAvg: {AVG:courses_avg, AVG:courses_avg}}]
zValQuery9c: APPLYTOKEN - semantics - MIN - Audit                           APPLY: [{overallMin: {MIN:courses_audit}}]
zValQuery9d: APPLYTOKEN - semantics - MIN - Average                         APPLY: [{overallMin: {MIN:courses_avg}}]
zValQuery9e: APPLYTOKEN - semantics - MIN - Fail                            APPLY: [{overallMin: {MIN:courses_fail}}]
zValQuery9f: APPLYTOKEN - semantics - MIN - Pass                            APPLY: [{overallMin: {MIN:courses_pass}}]
zValQuery9g: APPLYTOKEN - semantics - MIN - Year                            APPLY: [{overallMin: {MIN:courses_year}}]
zValQuery9h: APPLYTOKEN - semantics - MIN - Audit, Avg, Fail                APPLY: [{overallAudit: {MIN:courses_audit}}, {overallAvg: {MIN:courses_avg}}, {overallFail: {MIN:courses_fail}}]
zValQuery9i: APPLYTOKEN - semantics - MIN/MAX - MinAvg, MaxAvg, MinAvg      APPLY: [{overallAvg: {MIN:courses_avg}}, {overallAvg2: {MAX:courses_avg}}, {overallAvg3: {MIN:courses_avg}}]

zInvQuery9a: APPLYTOKEN - syntax - not an object                            APPLY: [{overallAvg: []}]
zInvQuery9b: APPLYTOKEN - syntax - empty object                             APPLY: [{overallAvg: {}}]
zInvQuery9c: APPLYTOKEN - syntax - misspelled                               APPLY: [{overallAvg: {MA: ...}}]
zInvQuery9d: APPLYTOKEN - syntax - misspelled                               APPLY: [{overallAvg: {max: ...}}]
zInvQuery9e: APPLYTOKEN - syntax - multiple keys in applytoken object       APPLY: [{overallAvg: {AVG:courses_avg, COUNT:courses_dept}}]
zInvQuery9f: APPLYTOKEN - semantics - key - not a valid idstring            APPLY: [{overallAvg: {MAX: cour_avg}}]
zInvQuery9g: APPLYTOKEN - semantics - key - not a valid field               APPLY: [{overallAvg: {MAX: courses_av}}]
zInvQuery9h: APPLYTOKEN - semantics - key - not '_'                         APPLY: [{overallAvg: {MAX: coursesavg}}]
zInvQuery9i: APPLYTOKEN - semantics - MIN - Department                      APPLY: [{overallMin: {MIN:courses_dept}}]
zInvQuery9j: APPLYTOKEN - semantics - MIN - ID                              APPLY: [{overallAvg: {AVG:courses_avg}}, {overallMin: {MIN:courses_avg}}]
zInvQuery9k: APPLYTOKEN - semantics - MIN - Instructor                      APPLY: [{overallAvg: {AVG:courses_avg}}, {overallMin: {MIN:courses_avg}}]
zInvQuery9l: APPLYTOKEN - semantics - MIN - Title                           APPLY: [{overallAvg: {AVG:courses_avg}}, {overallMin: {MIN:courses_avg}}]
zInvQuery9m: APPLYTOKEN - semantics - MIN - UUID                            APPLY: [{overallAvg: {AVG:courses_avg}}, {overallMin: {MIN:courses_avg}}]
zInvQuery9n: APPLYTOKEN - semantics - MIN - rooms key                       APPLY: [{overallMin: {MIN:rooms_lon}}]
zInvQuery9o: APPLYTOKEN - semantics - MIN - courses_seats                   APPLY: [{overallMin: {MIN:courses_seats}}]



